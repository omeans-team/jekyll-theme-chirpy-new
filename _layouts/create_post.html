---
layout: page
# The Create of posts.
---

{% include lang.html %}


<div class="container">
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <h1 class="text-center">Create a New Post</h1>
            <form>
                <label for="title_post">Title :</label>
                <div class="form-group">
                    <input type="text" class="form-control" id="title_post" placeholder="Enter Title Post">
                </div>
                <div class="form-group">
                    <label for="author_post">Author :</label>
                    <select class="form-control" id="author_post">
                        {% assign sorted_authors = site.data.authors | sort %}
                        {% for author in sorted_authors %}
                        <option value="{{ author[0] }}">{{ author[1].name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="markdownContent">Content Markdown :</label>
                    <textarea class="form-control" id="markdownContent" placeholder="Enter markdown content here..."></textarea>
                </div>
                <button type="button" class="btn btn-primary btn-block" onclick="createMarkdownFile()">Create Markdown File</button>
            </form>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        if (window.location.hostname!== '127.0.0.1' || window.location.port!== '4000') {
            window.location.replace('{{ site.baseurl }}/');
        }

        function createMarkdownFile() {
            var date = new Date();
            var dateWZero = (date.getDate() + 1).toString().padStart(2, '0');
            var month = (date.getMonth() + 1).toString().padStart(2, '0');
            var currentTime = "{{ 'now' | date: '%H:%M:%S' }}";
            const timezoneOffset = date.getTimezoneOffset();
            const timezoneOffsetHours = Math.abs(timezoneOffset / 60);
            const timezoneOffsetMinutes = Math.abs(timezoneOffset % 60);
            const timezoneOffsetSign = timezoneOffset > 0? "-" : "+";
            const timezoneOffsetFormatted = timezoneOffsetSign + timezoneOffsetHours.toString().padStart(2, "0") + timezoneOffsetMinutes.toString().padStart(2, "0");

            //console.log(timezoneOffsetFormatted); // Output: "+07:00"


            //ISI CONTENT START
            var title_postContent = document.getElementById('title_post').value;
            if (!title_postContent) {
                Swal.fire({
                  icon: 'error',
                  title: 'Oops...',
                  text: 'Please enter a title for your post!'
                });
                return;
            }
            var fullDateContent = `${date.getFullYear()}-${month}-${dateWZero} ${currentTime} ${timezoneOffsetFormatted}`;
            var fileNameContent = `${date.getFullYear()}-${month}-${date.getDate()}-${title_postContent}.md`;
            var author_post = document.getElementById('author_post').value.replace(/\s+/g, '_');
            var markdownContent = '---\n title: "' + title_postContent + '"\n date: ' + fullDateContent  + '\n author: ' + author_post + '\n ---\n' + document.getElementById('markdownContent').value;
            //ISI CONTENT END

            
            var title_post = document.getElementById('title_post').value.replace(/\s+/g, '-');
            var fileName = `${date.getFullYear()}-${month}-${dateWZero}-${title_post.toLowerCase()}.md`;
            var blob = new Blob([markdownContent], {type: 'text/markdown'});
            saveAs(blob, fileName);
        }

        function saveAs(blob, fileName) {
            if (navigator.msSaveBlob) {
                navigator.msSaveBlob(blob, fileName);
            } else {
                var link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = `${fileName}`;
                link.click();
            }
        }
        function saveFileToDrive() {
            var input = document.createElement('input');
            input.type = 'file';
            input.style.display = 'true';
            input.onchange = function(event) {
                var file = event.target.files[0];
                var reader = new FileReader();
                reader.onload = function(event) {
                    var content = event.target.result;
                    var blob = new Blob([content], {type: 'text/markdown'});
                    var date = new Date();
                    var dateWZero = (date.getDate() + 1).toString().padStart(2, '0');
                    var month = (date.getMonth() + 1).toString().padStart(2, '0');
                    var fileName = `${date.getFullYear()}-${month}-${dateWZero}-${title_post | downcase}.md`;
                    saveAs(blob, fileName.toLowerCase());
                };
                reader.readAsText(file);
            };
            input.click();
        }
    </script>